<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <title>ğŸ“‹çŸ³æ¦´é¤å§</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Comic Sans MS', 'Marker Felt', 'Arial Rounded MT Bold', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #ffdde1 0%, #ee9ca7 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 20px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            border: 3px dashed #ff9aa2;
        }
        
        h1 {
            color: #ff6b6b;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-shadow: 2px 2px 0px #ffd3d6;
        }
        
        .description {
            color: #ff9aa2;
            font-size: 1.2em;
        }
        
        .menu-library {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .category {
            background: rgba(255, 255, 255, 0.85);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            border: 2px solid #ffd3d6;
            transition: transform 0.3s ease;
        }
        
        .category:hover {
            transform: translateY(-5px);
        }
        
        .category h2 {
            color: #ff9aa2;
            border-bottom: 3px dotted #ff9aa2;
            padding-bottom: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            font-size: 1.5em;
        }
        
        .category h2 i {
            margin-right: 10px;
        }
        
        .dishes {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .dish-item {
            padding: 12px 15px;
            background: #f8f9fa;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .dish-item:before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }
        
        .dish-item:hover:before {
            left: 100%;
        }
        
        .dish-item:hover {
            background: #ffe6e9;
            transform: translateY(-3px);
            border-color: #ff9aa2;
            box-shadow: 0 4px 8px rgba(255, 154, 162, 0.3);
        }
        
        .dish-item.selected {
            background: #ff9aa2;
            color: white;
        }
        
        .dish-name {
            font-weight: 600;
            font-size: 1.1em;
        }
        
        .dish-actions {
            display: flex;
            gap: 5px;
        }
        
        .action-btn {
            background: #ffd3d6;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            background: #ff9aa2;
            color: white;
            transform: scale(1.1);
        }
        
        .selection-area {
            background: rgba(255, 255, 255, 0.85);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            border: 3px dashed #ff9aa2;
        }
        
        .selection-area h2 {
            color: #ff6b6b;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.8em;
            text-shadow: 1px 1px 0px #ffd3d6;
        }
        
        .week-plan {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .day-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 15px;
            min-height: 150px;
            border: 2px solid #ffd3d6;
            transition: transform 0.3s ease;
        }
        
        .day-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(255, 154, 162, 0.3);
        }
        
        .day-header {
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 10px;
            text-align: center;
            border-bottom: 2px dotted #ff9aa2;
            padding-bottom: 5px;
            font-size: 1.2em;
        }
        
        .selected-dishes {
            min-height: 100px;
        }
        
        .selected-dish {
            background: #ffe6e9;
            padding: 8px 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 0.9em;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid #ff9aa2;
        }
        
        .remove-dish {
            background: #ff9aa2;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.7em;
        }
        
        .buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        #generate-btn {
            background: #ff9aa2;
            color: white;
        }
        
        #generate-btn:hover {
            background: #ff6b6b;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(255, 107, 107, 0.3);
        }
        
        #reset-btn {
            background: #ffd3d6;
            color: #ff6b6b;
        }
        
        #reset-btn:hover {
            background: #ff9aa2;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(255, 154, 162, 0.3);
        }
        
        #save-btn {
            background: #b5ead7;
            color: #2d8f5c;
        }
        
        #save-btn:hover {
            background: #8cd9b3;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(140, 217, 179, 0.3);
        }
        
        /* å¼¹çª—æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 4px solid #ff9aa2;
            position: relative;
        }
        
        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #ff9aa2;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2em;
        }
        
        .dish-detail-title {
            color: #ff6b6b;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.8em;
        }
        
        .detail-section {
            margin-bottom: 20px;
        }
        
        .detail-section h3 {
            color: #ff9aa2;
            margin-bottom: 10px;
            border-bottom: 2px dotted #ffd3d6;
            padding-bottom: 5px;
        }
        
        .ingredients-list, .steps-list {
            padding-left: 20px;
        }
        
        .ingredients-list li, .steps-list li {
            margin-bottom: 8px;
            line-height: 1.5;
        }

        /* æ—¥æœŸé€‰æ‹©å™¨æ ·å¼ */
        .day-selector {
            margin: 20px 0;
            text-align: center;
        }
        
        .day-selector h3 {
            color: #ff9aa2;
            margin-bottom: 10px;
        }
        
        .day-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }
        
        .day-btn {
            padding: 8px 15px;
            background: #ffd3d6;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            color: #ff6b6b;
        }
        
        .day-btn:hover {
            background: #ff9aa2;
            color: white;
        }
        
        .day-btn.selected {
            background: #ff6b6b;
            color: white;
        }
        
        .day-btn.disabled {
            background: #e0e0e0;
            color: #a0a0a0;
            cursor: not-allowed;
        }
        .sync-status {
    position: fixed;
    top: 20px;
    right: 20px;
    background: rgba(255, 255, 255, 0.9);
    padding: 10px 15px;
    border-radius: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    gap: 8px;
    z-index: 1000;
    border: 2px solid #ff9aa2;
}

.sync-indicator {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #ff6b6b;
    animation: pulse 1.5s infinite;
}

.sync-indicator.connected {
    background: #4bb543;
}

.device-id {
    font-size: 0.8em;
    color: #666;
    margin-top: 5px;
}

@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}

/* åŒæ­¥é€šçŸ¥åŠ¨ç”» */
@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

@keyframes slideOut {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(100%); opacity: 0; }
}
        
        @media (max-width: 768px) {
            .menu-library {
                grid-template-columns: 1fr;
            }
            
            .week-plan {
                grid-template-columns: 1fr;
            }
            
            .buttons {
                flex-direction: column;
                align-items: center;
            }
            
            button {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <!-- åŒæ­¥çŠ¶æ€æŒ‡ç¤ºå™¨ -->
<div class="sync-status">
    <div class="sync-indicator" id="syncIndicator"></div>
    <div>
        <span id="syncStatusText">åŒæ­¥ä¸­...</span>
        <div class="device-id">è®¾å¤‡ID: <span id="deviceIdDisplay">ç”Ÿæˆä¸­...</span></div>
    </div>
</div>
    <div class="container">
        <header>
            <h1>ğŸ  çŸ³æ¦´é¤å§ ğŸ </h1>
            <p class="descriptbion">é€‰æ‹©æƒ³åƒçš„èœå§</p>
        </header>
        
        <div class="selection-area">
            <h2>ğŸ“… æœ¬å‘¨èœå•è®¡åˆ’</h2>
            <div class="week-plan">
                <div class="day-card">
                    <div class="day-header">æ˜ŸæœŸä¸€</div>
                    <div class="selected-dishes" id="monday-dishes"></div>
                </div>
                <div class="day-card">
                    <div class="day-header">æ˜ŸæœŸäºŒ</div>
                    <div class="selected-dishes" id="tuesday-dishes"></div>
                </div>
                <div class="day-card">
                    <div class="day-header">æ˜ŸæœŸä¸‰</div>
                    <div class="selected-dishes" id="wednesday-dishes"></div>
                </div>
                <div class="day-card">
                    <div class="day-header">æ˜ŸæœŸå››</div>
                    <div class="selected-dishes" id="thursday-dishes"></div>
                </div>
                <div class="day-card">
                    <div class="day-header">æ˜ŸæœŸäº”</div>
                    <div class="selected-dishes" id="friday-dishes"></div>
                </div>
                <div class="day-card">
                    <div class="day-header">æ˜ŸæœŸå…­</div>
                    <div class="selected-dishes" id="saturday-dishes"></div>
                </div>
                <div class="day-card">
                    <div class="day-header">æ˜ŸæœŸæ—¥</div>
                    <div class="selected-dishes" id="sunday-dishes"></div>
                </div>
            </div>
            
            <div class="buttons">
                <button id="generate-btn">ğŸ² éšæœºç”Ÿæˆä¸€å‘¨èœå•</button>
                <button id="reset-btn">ğŸ”„ æ¸…ç©ºèœå•</button>
                <button id="save-btn">ğŸ’¾ ä¿å­˜èœå•</button>
            </div>
        </div>
        
        <div class="menu-library">
            <div class="category">
                <h2>ğŸš ä¸»é£Ÿç±»</h2>
                <div class="dishes" id="staple-food">
                    <!-- ä¸»é£Ÿç±»èœå“å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                </div>
            </div>
            
            <div class="category">
                <h2>ğŸ– å®¶å¸¸è¤èœ</h2>
                <div class="dishes" id="meat-dishes">
                    <!-- è¤èœç±»èœå“å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                </div>
            </div>
            
            <div class="category">
                <h2>ğŸ¥¬ ç´ èœ & è›‹è±†åˆ¶å“</h2>
                <div class="dishes" id="vegetable-dishes">
                    <!-- ç´ èœç±»èœå“å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                </div>
            </div>
            
            <div class="category">
                <h2>ğŸ² æ±¤ç¾¹ç±»</h2>
                <div class="dishes" id="soup-dishes">
                    <!-- æ±¤ç¾¹ç±»èœå“å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                </div>
            </div>
            
            <div class="category">
                <h2>ğŸ³ æ—©é¤é€‰æ‹©</h2>
                <div class="dishes" id="breakfast-dishes">
                    <!-- æ—©é¤ç±»èœå“å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                </div>
            </div>
            
            <div class="category">
                <h2>ğŸ‰ ç‰¹è‰²/åº”æ€¥æ–¹æ¡ˆ</h2>
                <div class="dishes" id="special-dishes">
                    <!-- ç‰¹è‰²ç±»èœå“å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                </div>
            </div>
        </div>
    </div>

    <!-- èœå“è¯¦æƒ…å¼¹çª— -->
    <div class="modal" id="dish-modal">
        <div class="modal-content">
            <button class="close-btn" id="close-modal">Ã—</button>
            <h2 class="dish-detail-title" id="modal-dish-name"></h2>
            <div class="detail-section">
                <h3>ğŸ“‹ æ‰€éœ€ææ–™</h3>
                <ul class="ingredients-list" id="modal-ingredients"></ul>
            </div>
            <div class="detail-section">
                <h3>ğŸ‘©â€ğŸ³ åˆ¶ä½œæ­¥éª¤</h3>
                <ol class="steps-list" id="modal-steps"></ol>
            </div>
            <div class="day-selector">
                <h3>ğŸ“… é€‰æ‹©æ·»åŠ åˆ°å“ªä¸€å¤©</h3>
                <div class="day-buttons" id="day-selector-buttons">
                    <!-- æ—¥æœŸé€‰æ‹©æŒ‰é’®å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                </div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button id="add-to-menu-btn" style="background: #ff9aa2; color: white;">æ·»åŠ åˆ°èœå•</button>
            </div>
        </div>
    </div>

    <script>
        // èœå“è¯¦æƒ…æ•°æ® - è¡¥å……å®Œæ•´æ‰€æœ‰èœå“
        const dishDetails = {
            // ä¸»é£Ÿç±»
            "ç™½ç±³é¥­/æ‚ç²®é¥­": {
                ingredients: ["å¤§ç±³ 200g", "æ°´ é€‚é‡", "æ‚ç²®ï¼ˆå¯é€‰ï¼‰ 50g"],
                steps: ["å°†å¤§ç±³å’Œæ‚ç²®æ·˜æ´—å¹²å‡€", "åŠ å…¥é€‚é‡æ°´ï¼ˆä¸€èˆ¬ç±³æ°´æ¯”ä¾‹1:1.2ï¼‰", "æŒ‰ä¸‹ç”µé¥­ç…²ç…®é¥­é”®", "ç­‰å¾…ç…®ç†Ÿåç„–5åˆ†é’Ÿå³å¯"]
            },
            "æ±¤é¢(è¥¿çº¢æŸ¿é¸¡è›‹é¢)": {
                ingredients: ["é¢æ¡ 200g", "è¥¿çº¢æŸ¿ 2ä¸ª", "é¸¡è›‹ 2ä¸ª", "è‘±èŠ± é€‚é‡", "ç› é€‚é‡", "é£Ÿç”¨æ²¹ 1å‹º"],
                steps: ["è¥¿çº¢æŸ¿åˆ‡å—ï¼Œé¸¡è›‹æ‰“æ•£", "çƒ­é”…å†·æ²¹ï¼Œç‚’ç†Ÿé¸¡è›‹ç››å‡º", "é”…ä¸­æ”¾æ²¹ï¼Œç‚’è¥¿çº¢æŸ¿è‡³å‡ºæ±", "åŠ æ°´ç…®å¼€ï¼Œæ”¾å…¥é¢æ¡", "é¢æ¡å¿«ç†Ÿæ—¶åŠ å…¥ç‚’å¥½çš„é¸¡è›‹", "åŠ ç›è°ƒå‘³ï¼Œæ’’ä¸Šè‘±èŠ±"]
            },
            "ç‰›è‚‰é¢": {
                ingredients: ["é¢æ¡ 200g", "ç‰›è‚‰ 150g", "é’èœ é€‚é‡", "å§œç‰‡ 3ç‰‡", "æ–™é…’ 1å‹º", "é…±æ²¹ 1å‹º", "ç› é€‚é‡"],
                steps: ["ç‰›è‚‰åˆ‡ç‰‡ï¼Œç”¨æ–™é…’ã€é…±æ²¹è…Œåˆ¶", "é”…ä¸­çƒ§æ°´ç…®é¢ï¼Œæå‡ºå¤‡ç”¨", "å¦èµ·é”…ç‚’é¦™å§œç‰‡ï¼ŒåŠ å…¥ç‰›è‚‰ç¿»ç‚’", "åŠ æ°´ç…®å¼€ï¼Œæ”¾å…¥é’èœ", "å°†æ±¤å’Œç‰›è‚‰æµ‡åœ¨é¢ä¸Š"]
            },
            "ç‚’é¢/æ‹Œé¢": {
                ingredients: ["é¢æ¡ 200g", "è”¬èœï¼ˆèƒ¡èåœã€é’èœç­‰ï¼‰é€‚é‡", "é…±æ²¹ 2å‹º", "é£Ÿç”¨æ²¹ 2å‹º", "è’œæœ« é€‚é‡"],
                steps: ["é¢æ¡ç…®ç†Ÿè¿‡å†·æ°´", "çƒ­é”…å†·æ²¹ï¼Œçˆ†é¦™è’œæœ«", "åŠ å…¥è”¬èœç¿»ç‚’", "æ”¾å…¥é¢æ¡ï¼ŒåŠ é…±æ²¹ç¿»ç‚’å‡åŒ€"]
            },
            "æ‰¬å·ç‚’é¥­": {
                ingredients: ["ç±³é¥­ 2ç¢—", "é¸¡è›‹ 2ä¸ª", "ç«è…¿ä¸ 50g", "é’è±† 30g", "ç‰ç±³ç²’ 30g", "ç› é€‚é‡", "é£Ÿç”¨æ²¹ 2å‹º"],
                steps: ["é¸¡è›‹æ‰“æ•£ç‚’ç†Ÿç››å‡º", "é”…ä¸­æ”¾æ²¹ï¼ŒåŠ å…¥ç«è…¿ä¸ã€é’è±†ã€ç‰ç±³ç²’ç¿»ç‚’", "åŠ å…¥ç±³é¥­ç‚’æ•£", "æ”¾å…¥ç‚’å¥½çš„é¸¡è›‹", "åŠ ç›è°ƒå‘³ç¿»ç‚’å‡åŒ€"]
            },
            "é¥ºå­/é¦„é¥¨": {
                ingredients: ["é¥ºå­çš®/é¦„é¥¨çš® é€‚é‡", "è‚‰é¦… 200g", "è”¬èœï¼ˆç™½èœã€éŸ­èœç­‰ï¼‰é€‚é‡", "é…±æ²¹ 1å‹º", "ç› é€‚é‡"],
                steps: ["è‚‰é¦…å’Œè”¬èœæ··åˆï¼ŒåŠ é…±æ²¹ã€ç›è°ƒå‘³", "ç”¨çš®åŒ…æˆé¥ºå­æˆ–é¦„é¥¨", "é”…ä¸­çƒ§æ°´ï¼Œæ°´å¼€åæ”¾å…¥", "ç…®è‡³æµ®èµ·åå†ç…®2-3åˆ†é’Ÿ"]
            },
            "åŒ…å­/é¦’å¤´": {
                ingredients: ["é¢ç²‰ 500g", "é…µæ¯ 5g", "æ°´ 250ml", "é¦…æ–™ï¼ˆåŒ…å­ç”¨ï¼‰é€‚é‡"],
                steps: ["é¢ç²‰ã€é…µæ¯ã€æ°´æ‰æˆé¢å›¢", "å‘é…µè‡³ä¸¤å€å¤§", "æ‰é¢æ’æ°”ï¼Œåˆ†æˆå°å‰‚å­", "åŒ…å…¥é¦…æ–™ï¼ˆåŒ…å­ï¼‰æˆ–ç›´æ¥æ•´å½¢ï¼ˆé¦’å¤´ï¼‰", "ä¸Šé”…è’¸15-20åˆ†é’Ÿ"]
            },
            "æ„å¼è‚‰é…±é¢": {
                ingredients: ["æ„å¤§åˆ©é¢ 200g", "ç‰›è‚‰æœ« 150g", "ç•ªèŒ„é…± 3å‹º", "æ´‹è‘± åŠä¸ª", "å¤§è’œ 2ç“£", "ç› é€‚é‡", "æ©„æ¦„æ²¹ 1å‹º"],
                steps: ["ç…®æ„å¤§åˆ©é¢è‡³al dente", "é”…ä¸­æ”¾æ©„æ¦„æ²¹ï¼Œç‚’é¦™æ´‹è‘±ã€å¤§è’œ", "åŠ å…¥ç‰›è‚‰æœ«ç‚’ç†Ÿ", "æ”¾å…¥ç•ªèŒ„é…±ç…®5åˆ†é’Ÿ", "å°†è‚‰é…±æµ‡åœ¨é¢ä¸Š"]
            },
            "æŠ«è¨": {
                ingredients: ["æŠ«è¨é¥¼åº• 1ä¸ª", "æŠ«è¨é…± é€‚é‡", "é©¬è‹é‡Œæ‹‰å¥¶é…ª 100g", " toppingsï¼ˆç«è…¿ã€è”¬èœç­‰ï¼‰é€‚é‡"],
                steps: ["é¥¼åº•æ¶‚ä¸ŠæŠ«è¨é…±", "æ’’ä¸€å±‚å¥¶é…ª", "æ”¾ä¸Šå–œæ¬¢çš„toppings", "å†æ’’ä¸€å±‚å¥¶é…ª", "çƒ¤ç®±200åº¦çƒ¤15-20åˆ†é’Ÿ"]
            },
            "æ‰‹æŠ“é¥¼/å·é¥¼": {
                ingredients: ["æ‰‹æŠ“é¥¼çš® 2å¼ ", "é¸¡è›‹ 2ä¸ª", "ç”Ÿèœ 2ç‰‡", "ç«è…¿/åŸ¹æ ¹ 2ç‰‡", "ç”œé¢é…± é€‚é‡"],
                steps: ["æ‰‹æŠ“é¥¼ç…è‡³ä¸¤é¢é‡‘é»„", "ç…é¸¡è›‹å’Œç«è…¿", "é¥¼ä¸Šæ¶‚ç”œé¢é…±", "æ”¾ç”Ÿèœã€é¸¡è›‹ã€ç«è…¿", "å·èµ·æ¥å³å¯"]
            },
            
            // è¤èœç±»
            "çº¢çƒ§è‚‰": {
                ingredients: ["äº”èŠ±è‚‰ 500g", "ç”Ÿå§œ 3ç‰‡", "æ–™é…’ 2å‹º", "è€æŠ½ 1å‹º", "å†°ç³– 30g", "å…«è§’ 2ä¸ª", "æ¡‚çš® 1å°å—", "æ°´ é€‚é‡"],
                steps: ["äº”èŠ±è‚‰åˆ‡å—ç„¯æ°´", "é”…ä¸­æ”¾å°‘è®¸æ²¹ï¼ŒåŠ å…¥å†°ç³–ç‚’ç³–è‰²", "æ”¾å…¥äº”èŠ±è‚‰ç¿»ç‚’ä¸Šè‰²", "åŠ å…¥æ–™é…’ã€è€æŠ½ã€ç”Ÿå§œã€å…«è§’ã€æ¡‚çš®", "åŠ æ°´æ²¡è¿‡è‚‰ï¼Œå°ç«ç‚–ç…®40åˆ†é’Ÿ", "å¤§ç«æ”¶æ±å³å¯"]
            },
            "å¯ä¹é¸¡ç¿…": {
                ingredients: ["é¸¡ç¿… 8ä¸ª", "å¯ä¹ 1ç½", "ç”Ÿå§œ 3ç‰‡", "æ–™é…’ 1å‹º", "é…±æ²¹ 2å‹º"],
                steps: ["é¸¡ç¿…ä¸¤é¢åˆ’åˆ€", "é”…ä¸­æ”¾æ²¹ç…é¸¡ç¿…è‡³ä¸¤é¢é‡‘é»„", "åŠ å…¥æ–™é…’ã€é…±æ²¹ã€ç”Ÿå§œ", "å€’å…¥å¯ä¹æ²¡è¿‡é¸¡ç¿…", "å¤§ç«ç…®å¼€è½¬å°ç«ç‚–15åˆ†é’Ÿ", "å¤§ç«æ”¶æ±"]
            },
            "ç³–é†‹æ’éª¨": {
                ingredients: ["æ’éª¨ 500g", "é†‹ 3å‹º", "ç³– 2å‹º", "é…±æ²¹ 2å‹º", "æ–™é…’ 1å‹º", "ç”Ÿå§œ 3ç‰‡"],
                steps: ["æ’éª¨ç„¯æ°´", "é”…ä¸­æ”¾æ²¹ç…æ’éª¨", "åŠ å…¥æ–™é…’ã€é…±æ²¹ã€ç³–ã€é†‹", "åŠ æ°´æ²¡è¿‡æ’éª¨", "å°ç«ç‚–30åˆ†é’Ÿ", "å¤§ç«æ”¶æ±"]
            },
            "å›é”…è‚‰": {
                ingredients: ["äº”èŠ±è‚‰ 300g", "é’æ¤’ 2ä¸ª", "è’œè‹— 2æ ¹", "è±†ç“£é…± 1å‹º", "é…±æ²¹ 1å‹º", "ç³– å°‘è®¸"],
                steps: ["äº”èŠ±è‚‰ç…®ç†Ÿåˆ‡ç‰‡", "é”…ä¸­æ”¾æ²¹ç‚’è‚‰ç‰‡è‡³å¾®å·", "åŠ å…¥è±†ç“£é…±ç‚’é¦™", "æ”¾å…¥é’æ¤’ã€è’œè‹—ç¿»ç‚’", "åŠ é…±æ²¹ã€ç³–è°ƒå‘³"]
            },
            "æœ¨é¡»è‚‰": {
                ingredients: ["çŒªè‚‰ 200g", "é¸¡è›‹ 2ä¸ª", "é»‘æœ¨è€³ 10g", "é»„ç“œ 1æ ¹", "é…±æ²¹ 1å‹º", "æ–™é…’ 1å‹º"],
                steps: ["çŒªè‚‰åˆ‡ç‰‡ç”¨æ–™é…’è…Œåˆ¶", "é¸¡è›‹ç‚’ç†Ÿç››å‡º", "é”…ä¸­æ”¾æ²¹ç‚’è‚‰ç‰‡", "åŠ å…¥æ³¡å‘çš„é»‘æœ¨è€³", "æ”¾å…¥é»„ç“œç‰‡å’Œé¸¡è›‹", "åŠ é…±æ²¹ç¿»ç‚’å‡åŒ€"]
            },
            "çº¢çƒ§é¸¡å—": {
                ingredients: ["é¸¡å— 500g", "ç”Ÿå§œ 3ç‰‡", "æ–™é…’ 2å‹º", "é…±æ²¹ 2å‹º", "ç³– 1å‹º", "å…«è§’ 1ä¸ª"],
                steps: ["é¸¡å—ç„¯æ°´", "é”…ä¸­æ”¾æ²¹ç‚’é¦™å§œç‰‡", "åŠ å…¥é¸¡å—ç¿»ç‚’", "æ”¾å…¥æ–™é…’ã€é…±æ²¹ã€ç³–ã€å…«è§’", "åŠ æ°´ç‚–20åˆ†é’Ÿ", "æ”¶æ±å³å¯"]
            },
            "åœŸè±†çƒ§é¸¡": {
                ingredients: ["é¸¡å— 400g", "åœŸè±† 2ä¸ª", "ç”Ÿå§œ 3ç‰‡", "æ–™é…’ 1å‹º", "é…±æ²¹ 2å‹º", "ç› é€‚é‡"],
                steps: ["é¸¡å—ç„¯æ°´", "åœŸè±†åˆ‡å—", "é”…ä¸­æ”¾æ²¹ç‚’é¸¡å—", "åŠ å…¥åœŸè±†ã€æ–™é…’ã€é…±æ²¹", "åŠ æ°´ç‚–15åˆ†é’Ÿ", "åŠ ç›è°ƒå‘³æ”¶æ±"]
            },
            "è¾£å­é¸¡": {
                ingredients: ["é¸¡å— 500g", "å¹²è¾£æ¤’ é€‚é‡", "èŠ±æ¤’ 1å‹º", "ç”Ÿå§œ 3ç‰‡", "æ–™é…’ 1å‹º", "é…±æ²¹ 1å‹º"],
                steps: ["é¸¡å—ç”¨æ–™é…’ã€é…±æ²¹è…Œåˆ¶", "æ²¹çƒ­ç‚¸é¸¡å—è‡³é‡‘é»„", "é”…ä¸­ç•™åº•æ²¹ç‚’é¦™å¹²è¾£æ¤’ã€èŠ±æ¤’", "æ”¾å…¥é¸¡å—ç¿»ç‚’å‡åŒ€"]
            },
            "å®«ä¿é¸¡ä¸": {
                ingredients: ["é¸¡èƒ¸è‚‰ 300g", "èŠ±ç”Ÿç±³ 50g", "å¹²è¾£æ¤’ é€‚é‡", "é…±æ²¹ 2å‹º", "é†‹ 1å‹º", "ç³– 1å‹º", "æ–™é…’ 1å‹º"],
                steps: ["é¸¡èƒ¸è‚‰åˆ‡ä¸ç”¨æ–™é…’è…Œåˆ¶", "é”…ä¸­æ”¾æ²¹ç‚’é¸¡ä¸", "åŠ å…¥å¹²è¾£æ¤’", "æ”¾å…¥é…±æ²¹ã€ç³–ã€é†‹è°ƒå‘³", "æœ€ååŠ å…¥èŠ±ç”Ÿç±³"]
            },
            "ç•ªèŒ„ç‰›è…©": {
                ingredients: ["ç‰›è…© 500g", "ç•ªèŒ„ 3ä¸ª", "ç”Ÿå§œ 3ç‰‡", "æ–™é…’ 2å‹º", "ç› é€‚é‡"],
                steps: ["ç‰›è…©åˆ‡å—ç„¯æ°´", "ç•ªèŒ„å»çš®åˆ‡å—", "é”…ä¸­æ”¾æ²¹ç‚’é¦™å§œç‰‡", "åŠ å…¥ç‰›è…©ç¿»ç‚’", "æ”¾å…¥ç•ªèŒ„ç‚’å‡ºæ±", "åŠ æ°´ç‚–1å°æ—¶", "åŠ ç›è°ƒå‘³"]
            },
            "èƒ¡èåœçƒ§ç‰›è‚‰": {
                ingredients: ["ç‰›è‚‰ 500g", "èƒ¡èåœ 2æ ¹", "ç”Ÿå§œ 3ç‰‡", "æ–™é…’ 2å‹º", "é…±æ²¹ 2å‹º", "ç› é€‚é‡"],
                steps: ["ç‰›è‚‰åˆ‡å—ç„¯æ°´", "èƒ¡èåœåˆ‡æ»šåˆ€å—", "é”…ä¸­æ”¾æ²¹ç‚’é¦™å§œç‰‡", "åŠ å…¥ç‰›è‚‰ç¿»ç‚’", "æ”¾å…¥èƒ¡èåœã€æ–™é…’ã€é…±æ²¹", "åŠ æ°´ç‚–40åˆ†é’Ÿ", "åŠ ç›è°ƒå‘³"]
            },
            "æ¸…è’¸é²ˆé±¼": {
                ingredients: ["é²ˆé±¼ 1æ¡", "ç”Ÿå§œ 5ç‰‡", "è‘± 2æ ¹", "æ–™é…’ 1å‹º", "è’¸é±¼è±‰æ²¹ 2å‹º"],
                steps: ["é²ˆé±¼å¤„ç†å¹²å‡€ï¼Œèº«ä¸Šåˆ’å‡ åˆ€", "ç›˜åº•æ”¾å§œç‰‡ï¼Œé±¼èº«ä¸Šæ”¾å§œç‰‡ã€è‘±æ®µ", "æ·‹ä¸Šæ–™é…’", "æ°´å¼€åè’¸8-10åˆ†é’Ÿ", "æ·‹ä¸Šè’¸é±¼è±‰æ²¹"]
            },
            "çº¢çƒ§å¸¦é±¼": {
                ingredients: ["å¸¦é±¼ 500g", "ç”Ÿå§œ 3ç‰‡", "æ–™é…’ 2å‹º", "é…±æ²¹ 2å‹º", "ç³– 1å‹º", "é†‹ 1å‹º"],
                steps: ["å¸¦é±¼åˆ‡æ®µç…è‡³ä¸¤é¢é‡‘é»„", "é”…ä¸­ç•™åº•æ²¹ç‚’é¦™å§œç‰‡", "æ”¾å…¥å¸¦é±¼", "åŠ å…¥æ–™é…’ã€é…±æ²¹ã€ç³–ã€é†‹", "åŠ æ°´ç‚–10åˆ†é’Ÿ", "æ”¶æ±å³å¯"]
            },
            "æ²¹ç„–å¤§è™¾": {
                ingredients: ["å¤§è™¾ 400g", "ç”Ÿå§œ 3ç‰‡", "æ–™é…’ 1å‹º", "é…±æ²¹ 2å‹º", "ç³– 1å‹º", "è‘± 1æ ¹"],
                steps: ["å¤§è™¾å‰ªå»é¡»è„š", "é”…ä¸­æ”¾æ²¹ç…è™¾è‡³å˜çº¢", "åŠ å…¥æ–™é…’ã€é…±æ²¹ã€ç³–", "åŠ æ°´ç„–5åˆ†é’Ÿ", "æ’’ä¸Šè‘±èŠ±"]
            },
            
            // ç´ èœç±»
            "è’œè“‰è¥¿å…°èŠ±": {
                ingredients: ["è¥¿å…°èŠ± 1é¢—", "å¤§è’œ 5ç“£", "ç› é€‚é‡", "é£Ÿç”¨æ²¹ 1å‹º"],
                steps: ["è¥¿å…°èŠ±æ´—å‡€åˆ‡å°æœµ", "å¤§è’œåˆ‡æœ«", "é”…ä¸­çƒ§æ°´ï¼Œæ°´å¼€åæ”¾å…¥è¥¿å…°èŠ±ç„¯æ°´1åˆ†é’Ÿ", "çƒ­é”…å†·æ²¹ï¼Œæ”¾å…¥è’œæœ«çˆ†é¦™", "åŠ å…¥è¥¿å…°èŠ±ç¿»ç‚’", "åŠ ç›è°ƒå‘³å³å¯"]
            },
            "æ¸…ç‚’èœå¿ƒ": {
                ingredients: ["èœå¿ƒ 300g", "å¤§è’œ 3ç“£", "ç› é€‚é‡", "é£Ÿç”¨æ²¹ 1å‹º"],
                steps: ["èœå¿ƒæ´—å‡€", "å¤§è’œåˆ‡ç‰‡", "çƒ­é”…å†·æ²¹ï¼Œçˆ†é¦™è’œç‰‡", "åŠ å…¥èœå¿ƒç¿»ç‚’", "åŠ ç›è°ƒå‘³"]
            },
            "èšæ²¹ç”Ÿèœ": {
                ingredients: ["ç”Ÿèœ 1é¢—", "èšæ²¹ 2å‹º", "å¤§è’œ 2ç“£", "é£Ÿç”¨æ²¹ 1å‹º"],
                steps: ["ç”Ÿèœæ´—å‡€", "å¤§è’œåˆ‡æœ«", "é”…ä¸­çƒ§æ°´ï¼Œæ°´å¼€åæ”¾å…¥ç”Ÿèœç„¯æ°´30ç§’", "çƒ­é”…å†·æ²¹ï¼Œçˆ†é¦™è’œæœ«", "åŠ å…¥èšæ²¹å’Œå°‘è®¸æ°´", "æ·‹åœ¨ç”Ÿèœä¸Š"]
            },
            "é…¸è¾£åœŸè±†ä¸": {
                ingredients: ["åœŸè±† 2ä¸ª", "å¹²è¾£æ¤’ 3ä¸ª", "é†‹ 2å‹º", "ç› é€‚é‡", "é£Ÿç”¨æ²¹ 1å‹º"],
                steps: ["åœŸè±†åˆ‡ä¸æ³¡æ°´", "å¹²è¾£æ¤’åˆ‡æ®µ", "çƒ­é”…å†·æ²¹ï¼Œçˆ†é¦™å¹²è¾£æ¤’", "åŠ å…¥åœŸè±†ä¸ç¿»ç‚’", "åŠ é†‹ã€ç›è°ƒå‘³"]
            },
            "ç•ªèŒ„ç‚’è›‹": {
                ingredients: ["ç•ªèŒ„ 2ä¸ª", "é¸¡è›‹ 3ä¸ª", "ç³– 1å‹º", "ç› é€‚é‡", "é£Ÿç”¨æ²¹ 2å‹º"],
                steps: ["ç•ªèŒ„åˆ‡å—ï¼Œé¸¡è›‹æ‰“æ•£", "çƒ­é”…å†·æ²¹ç‚’ç†Ÿé¸¡è›‹ç››å‡º", "é”…ä¸­æ”¾æ²¹ç‚’ç•ªèŒ„è‡³å‡ºæ±", "åŠ å…¥é¸¡è›‹ç¿»ç‚’", "åŠ ç³–ã€ç›è°ƒå‘³"]
            },
            "çº¢çƒ§èŒ„å­": {
                ingredients: ["èŒ„å­ 2æ ¹", "å¤§è’œ 3ç“£", "é…±æ²¹ 2å‹º", "ç³– 1å‹º", "é£Ÿç”¨æ²¹ 2å‹º"],
                steps: ["èŒ„å­åˆ‡æ»šåˆ€å—", "å¤§è’œåˆ‡æœ«", "é”…ä¸­æ”¾æ²¹ç…èŒ„å­", "åŠ å…¥é…±æ²¹ã€ç³–ã€å°‘è®¸æ°´", "ç„–ç…®5åˆ†é’Ÿ", "æ’’ä¸Šè’œæœ«"]
            },
            "åœ°ä¸‰é²œ": {
                ingredients: ["åœŸè±† 1ä¸ª", "èŒ„å­ 1æ ¹", "é’æ¤’ 1ä¸ª", "é…±æ²¹ 2å‹º", "ç³– 1å‹º", "é£Ÿç”¨æ²¹ 3å‹º"],
                steps: ["åœŸè±†ã€èŒ„å­ã€é’æ¤’åˆ‡å—", "åœŸè±†ã€èŒ„å­åˆ†åˆ«æ²¹ç‚¸", "é”…ä¸­ç•™åº•æ²¹ç‚’é’æ¤’", "åŠ å…¥åœŸè±†ã€èŒ„å­", "æ”¾å…¥é…±æ²¹ã€ç³–è°ƒå‘³"]
            },
            "éº»å©†è±†è…": {
                ingredients: ["è±†è… 1å—", "è‚‰æœ« 50g", "è±†ç“£é…± 1å‹º", "èŠ±æ¤’ç²‰ 1å‹º", "é…±æ²¹ 1å‹º", "æ°´æ·€ç²‰ é€‚é‡"],
                steps: ["è±†è…åˆ‡å—ç„¯æ°´", "é”…ä¸­æ”¾æ²¹ç‚’è‚‰æœ«", "åŠ å…¥è±†ç“£é…±ç‚’é¦™", "æ”¾å…¥è±†è…è½»è½»ç¿»ç‚’", "åŠ æ°´ç…®5åˆ†é’Ÿ", "å‹¾èŠ¡æ’’èŠ±æ¤’ç²‰"]
            },
            "å®¶å¸¸è±†è…": {
                ingredients: ["è±†è… 1å—", "æœ¨è€³ 10g", "é’æ¤’ 1ä¸ª", "é…±æ²¹ 2å‹º", "ç³– 1å‹º", "é£Ÿç”¨æ²¹ 2å‹º"],
                steps: ["è±†è…åˆ‡ç‰‡ç…è‡³ä¸¤é¢é‡‘é»„", "æœ¨è€³æ³¡å‘ï¼Œé’æ¤’åˆ‡ç‰‡", "é”…ä¸­æ”¾æ²¹ç‚’é’æ¤’ã€æœ¨è€³", "åŠ å…¥è±†è…", "æ”¾å…¥é…±æ²¹ã€ç³–è°ƒå‘³"]
            },
            "æ¸…ç‚’è·å…°è±†": {
                ingredients: ["è·å…°è±† 200g", "å¤§è’œ 2ç“£", "ç› é€‚é‡", "é£Ÿç”¨æ²¹ 1å‹º"],
                steps: ["è·å…°è±†å»ç­‹", "å¤§è’œåˆ‡ç‰‡", "çƒ­é”…å†·æ²¹çˆ†é¦™è’œç‰‡", "åŠ å…¥è·å…°è±†ç¿»ç‚’", "åŠ ç›è°ƒå‘³"]
            },
            "è’œè“‰ç©ºå¿ƒèœ": {
                ingredients: ["ç©ºå¿ƒèœ 300g", "å¤§è’œ 4ç“£", "ç› é€‚é‡", "é£Ÿç”¨æ²¹ 1å‹º"],
                steps: ["ç©ºå¿ƒèœæ´—å‡€åˆ‡æ®µ", "å¤§è’œåˆ‡æœ«", "çƒ­é”…å†·æ²¹çˆ†é¦™è’œæœ«", "åŠ å…¥ç©ºå¿ƒèœç¿»ç‚’", "åŠ ç›è°ƒå‘³"]
            },
            
            // æ±¤ç¾¹ç±»
            "ç´«èœè›‹èŠ±æ±¤": {
                ingredients: ["ç´«èœ 10g", "é¸¡è›‹ 2ä¸ª", "è‘±èŠ± é€‚é‡", "ç› é€‚é‡", "é¦™æ²¹ å‡ æ»´"],
                steps: ["ç´«èœç”¨æ¸©æ°´æ³¡è½¯", "é¸¡è›‹æ‰“æ•£å¤‡ç”¨", "é”…ä¸­çƒ§æ°´ï¼Œæ°´å¼€åæ”¾å…¥ç´«èœ", "æ…¢æ…¢å€’å…¥è›‹æ¶²ï¼Œå½¢æˆè›‹èŠ±", "åŠ ç›è°ƒå‘³ï¼Œæ’’ä¸Šè‘±èŠ±", "å‡ºé”…å‰æ»´å‡ æ»´é¦™æ²¹"]
            },
            "è¥¿çº¢æŸ¿è›‹æ±¤": {
                ingredients: ["è¥¿çº¢æŸ¿ 2ä¸ª", "é¸¡è›‹ 2ä¸ª", "è‘±èŠ± é€‚é‡", "ç› é€‚é‡", "é¦™æ²¹ å‡ æ»´"],
                steps: ["è¥¿çº¢æŸ¿åˆ‡å—", "é¸¡è›‹æ‰“æ•£", "é”…ä¸­æ”¾æ²¹ç‚’è¥¿çº¢æŸ¿", "åŠ æ°´ç…®å¼€", "æ…¢æ…¢å€’å…¥è›‹æ¶²", "åŠ ç›è°ƒå‘³ï¼Œæ’’è‘±èŠ±æ»´é¦™æ²¹"]
            },
            "è±†è…èŒè‡æ±¤": {
                ingredients: ["è±†è… 1å—", "èŒè‡ï¼ˆé‡‘é’ˆè‡ã€é¦™è‡ç­‰ï¼‰é€‚é‡", "è‘±èŠ± é€‚é‡", "ç› é€‚é‡", "é¦™æ²¹ å‡ æ»´"],
                steps: ["è±†è…åˆ‡å—ï¼ŒèŒè‡æ´—å‡€", "é”…ä¸­çƒ§æ°´ï¼Œæ”¾å…¥èŒè‡ç…®5åˆ†é’Ÿ", "åŠ å…¥è±†è…ç…®3åˆ†é’Ÿ", "åŠ ç›è°ƒå‘³ï¼Œæ’’è‘±èŠ±æ»´é¦™æ²¹"]
            },
            "å†¬ç“œè™¾çš®æ±¤": {
                ingredients: ["å†¬ç“œ 300g", "è™¾çš® 10g", "è‘±èŠ± é€‚é‡", "ç› é€‚é‡", "é¦™æ²¹ å‡ æ»´"],
                steps: ["å†¬ç“œå»çš®åˆ‡ç‰‡", "é”…ä¸­çƒ§æ°´ï¼Œæ”¾å…¥å†¬ç“œç…®10åˆ†é’Ÿ", "åŠ å…¥è™¾çš®ç…®2åˆ†é’Ÿ", "åŠ ç›è°ƒå‘³ï¼Œæ’’è‘±èŠ±æ»´é¦™æ²¹"]
            },
            "æ’éª¨ç‰ç±³æ±¤": {
                ingredients: ["æ’éª¨ 300g", "ç‰ç±³ 1æ ¹", "å§œç‰‡ 3ç‰‡", "ç› é€‚é‡"],
                steps: ["æ’éª¨ç„¯æ°´", "ç‰ç±³åˆ‡æ®µ", "é”…ä¸­æ”¾æ°´ï¼ŒåŠ å…¥æ’éª¨ã€ç‰ç±³ã€å§œç‰‡", "å¤§ç«ç…®å¼€è½¬å°ç«ç‚–1å°æ—¶", "åŠ ç›è°ƒå‘³"]
            },
            "é¸¡æ±¤/è€é¸­ç…²": {
                ingredients: ["é¸¡/é¸­ åŠåª", "å§œç‰‡ 5ç‰‡", "æ–™é…’ 2å‹º", "ç› é€‚é‡"],
                steps: ["é¸¡/é¸­ç„¯æ°´", "é”…ä¸­æ”¾æ°´ï¼ŒåŠ å…¥é¸¡/é¸­ã€å§œç‰‡ã€æ–™é…’", "å¤§ç«ç…®å¼€è½¬å°ç«ç‚–2å°æ—¶", "åŠ ç›è°ƒå‘³"]
            },
            
            // æ—©é¤ç±»
            "ç²¥+é…±èœ/è‚‰æ¾": {
                ingredients: ["å¤§ç±³ 100g", "æ°´ é€‚é‡", "é…±èœæˆ–è‚‰æ¾ é€‚é‡"],
                steps: ["å¤§ç±³æ·˜æ´—å¹²å‡€", "åŠ å…¥é€‚é‡æ°´ï¼ˆçº¦1:8çš„æ¯”ä¾‹ï¼‰", "å¤§ç«ç…®å¼€åè½¬å°ç«æ…¢ç†¬30åˆ†é’Ÿ", "æ­é…é…±èœæˆ–è‚‰æ¾é£Ÿç”¨"]
            },
            "è±†æµ†+åŒ…å­": {
                ingredients: ["è±†æµ†ç²‰æˆ–é»„è±† é€‚é‡", "åŒ…å­ 2ä¸ª", "æ°´ é€‚é‡"],
                steps: ["æŒ‰è¯´æ˜å†²æ³¡è±†æµ†æˆ–è‡ªåˆ¶è±†æµ†", "åŒ…å­è’¸çƒ­", "æ­é…é£Ÿç”¨"]
            },
            "ç‰›å¥¶ç‡•éº¦": {
                ingredients: ["ç‰›å¥¶ 250ml", "ç‡•éº¦ç‰‡ 50g", "æ°´æœ/åšæœ é€‚é‡"],
                steps: ["ç‰›å¥¶åŠ çƒ­", "åŠ å…¥ç‡•éº¦ç‰‡ç…®2åˆ†é’Ÿ", "æ’’ä¸Šå–œæ¬¢çš„æ°´æœæˆ–åšæœ"]
            },
            "é¦„é¥¨/é¥ºå­": {
                ingredients: ["é¦„é¥¨/é¥ºå­ é€‚é‡", "ç´«èœ å°‘è®¸", "è™¾çš® å°‘è®¸", "é…±æ²¹ 1å‹º", "é¦™æ²¹ å‡ æ»´"],
                steps: ["é”…ä¸­çƒ§æ°´ç…®é¦„é¥¨/é¥ºå­", "ç¢—ä¸­æ”¾å…¥ç´«èœã€è™¾çš®ã€é…±æ²¹ã€é¦™æ²¹", "èˆ€å…¥ç…®å¥½çš„é¦„é¥¨/é¥ºå­å’Œæ±¤"]
            },
            "é¢åŒ…/åå¸": {
                ingredients: ["é¢åŒ…/åå¸ 2ç‰‡", "æœé…±/é»„æ²¹ é€‚é‡", "ç‰›å¥¶ 1æ¯"],
                steps: ["é¢åŒ…/åå¸çƒ¤è‡³å¾®é»„", "æ¶‚ä¸Šæœé…±æˆ–é»„æ²¹", "æ­é…ç‰›å¥¶é£Ÿç”¨"]
            },
            "ç…è›‹/ç‚’è›‹": {
                ingredients: ["é¸¡è›‹ 2ä¸ª", "ç› é€‚é‡", "é£Ÿç”¨æ²¹ 1å‹º", "é¢åŒ… 2ç‰‡"],
                steps: ["é¸¡è›‹æ‰“æ•£åŠ ç›ï¼ˆç‚’è›‹ï¼‰æˆ–ç›´æ¥æ‰“å…¥é”…ä¸­ï¼ˆç…è›‹ï¼‰", "çƒ­é”…å†·æ²¹ï¼Œç…/ç‚’è‡³å–œæ¬¢çš„ç†Ÿåº¦", "æ­é…é¢åŒ…é£Ÿç”¨"]
            },
            
            // ç‰¹è‰²/åº”æ€¥æ–¹æ¡ˆ
            "ç«é”…": {
                ingredients: ["ç«é”…åº•æ–™ 1åŒ…", "å„ç§è‚‰ç±»ï¼ˆç‰›è‚‰ã€ç¾Šè‚‰ç­‰ï¼‰é€‚é‡", "è”¬èœï¼ˆç™½èœã€è èœç­‰ï¼‰é€‚é‡", "è±†è…/è±†çš® é€‚é‡", "ä¸¸å­ é€‚é‡"],
                steps: ["é”…ä¸­åŠ æ°´ï¼Œæ”¾å…¥ç«é”…åº•æ–™ç…®å¼€", "å‡†å¤‡å–œæ¬¢çš„é£Ÿæ", "è¾¹ç…®è¾¹åƒ"]
            },
            "çƒ§çƒ¤": {
                ingredients: ["å„ç§è‚‰ç±»ï¼ˆé¸¡ç¿…ã€è‚‰ä¸²ç­‰ï¼‰é€‚é‡", "è”¬èœï¼ˆç‰ç±³ã€èŒ„å­ç­‰ï¼‰é€‚é‡", "çƒ§çƒ¤é…± é€‚é‡", "å­œç„¶ã€è¾£æ¤’ç²‰ é€‚é‡"],
                steps: ["é£Ÿæè…Œåˆ¶æˆ–åˆ‡å¥½", "ç‚­ç«æˆ–ç”µçƒ¤ç‚‰é¢„çƒ­", "çƒ¤è‡³ç†Ÿé€ï¼Œæ’’ä¸Šè°ƒæ–™"]
            },
            "é€Ÿå†»é£Ÿå“": {
                ingredients: ["é€Ÿå†»é¥ºå­/åŒ…å­/æŠ«è¨ç­‰ é€‚é‡"],
                steps: ["æŒ‰åŒ…è£…è¯´æ˜åŠ çƒ­é£Ÿç”¨"]
            },
            "å¤–å–": {
                ingredients: ["æ‰‹æœº 1éƒ¨", "å¤–å–APP 1ä¸ª"],
                steps: ["æ‰“å¼€å¤–å–APP", "é€‰æ‹©å–œæ¬¢çš„é¤å…å’Œèœå“", "ä¸‹å•ç­‰å¾…é…é€"]
            },
            "æ–¹ä¾¿é¢+é¸¡è›‹/è”¬èœ": {
                ingredients: ["æ–¹ä¾¿é¢ 1åŒ…", "é¸¡è›‹ 1ä¸ª", "è”¬èœ é€‚é‡"],
                steps: ["é”…ä¸­çƒ§æ°´", "åŠ å…¥è”¬èœå’Œè°ƒæ–™åŒ…", "æ°´å¼€åæ”¾å…¥é¢é¥¼å’Œé¸¡è›‹", "ç…®3åˆ†é’Ÿå³å¯"]
            }
        };

        // èœå“åˆ†ç±»æ•°æ®
        const dishCategories = {
            "staple-food": [
                "ç™½ç±³é¥­/æ‚ç²®é¥­", "æ±¤é¢(è¥¿çº¢æŸ¿é¸¡è›‹é¢)", "ç‰›è‚‰é¢", "ç‚’é¢/æ‹Œé¢", 
                "æ‰¬å·ç‚’é¥­", "é¥ºå­/é¦„é¥¨", "åŒ…å­/é¦’å¤´", "æ„å¼è‚‰é…±é¢", "æŠ«è¨", "æ‰‹æŠ“é¥¼/å·é¥¼"
            ],
            "meat-dishes": [
                "çº¢çƒ§è‚‰", "å¯ä¹é¸¡ç¿…", "ç³–é†‹æ’éª¨", "å›é”…è‚‰", "æœ¨é¡»è‚‰", 
                "çº¢çƒ§é¸¡å—", "åœŸè±†çƒ§é¸¡", "è¾£å­é¸¡", "å®«ä¿é¸¡ä¸", "ç•ªèŒ„ç‰›è…©", 
                "èƒ¡èåœçƒ§ç‰›è‚‰", "æ¸…è’¸é²ˆé±¼", "çº¢çƒ§å¸¦é±¼", "æ²¹ç„–å¤§è™¾"
            ],
            "vegetable-dishes": [
                "è’œè“‰è¥¿å…°èŠ±", "æ¸…ç‚’èœå¿ƒ", "èšæ²¹ç”Ÿèœ", "é…¸è¾£åœŸè±†ä¸", 
                "ç•ªèŒ„ç‚’è›‹", "çº¢çƒ§èŒ„å­", "åœ°ä¸‰é²œ", "éº»å©†è±†è…", 
                "å®¶å¸¸è±†è…", "æ¸…ç‚’è·å…°è±†", "è’œè“‰ç©ºå¿ƒèœ"
            ],
            "soup-dishes": [
                "ç´«èœè›‹èŠ±æ±¤", "è¥¿çº¢æŸ¿è›‹æ±¤", "è±†è…èŒè‡æ±¤", 
                "å†¬ç“œè™¾çš®æ±¤", "æ’éª¨ç‰ç±³æ±¤", "é¸¡æ±¤/è€é¸­ç…²"
            ],
            "breakfast-dishes": [
                "ç²¥+é…±èœ/è‚‰æ¾", "è±†æµ†+åŒ…å­", "ç‰›å¥¶ç‡•éº¦", 
                "é¦„é¥¨/é¥ºå­", "é¢åŒ…/åå¸", "ç…è›‹/ç‚’è›‹"
            ],
            "special-dishes": [
                "ç«é”…", "çƒ§çƒ¤", "é€Ÿå†»é£Ÿå“", 
                "å¤–å–", "æ–¹ä¾¿é¢+é¸¡è›‹/è”¬èœ", "å‰©èœå‰©é¥­"
            ]
        };

        // å½“å‰é€‰ä¸­çš„èœå“å’Œæ—¥æœŸ
        let selectedDish = null;
        let selectedDay = null;
        
        // å‘¨èœå•æ•°æ®
        const weekMenu = {
            monday: [],
            tuesday: [],
            wednesday: [],
            thursday: [],
            friday: [],
            saturday: [],
            sunday: []
        };

        // åˆå§‹åŒ–å‡½æ•°
        function init() {
            // æ¸²æŸ“èœå“åˆ—è¡¨
            renderDishList();
            
            // æ¸²æŸ“æ—¥æœŸé€‰æ‹©æŒ‰é’®
            renderDayButtons();
            
            // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
            bindEvents();
            
            // åŠ è½½ä¿å­˜çš„èœå•ï¼ˆå¦‚æœæœ‰ï¼‰
            loadSavedMenu();
        }

        // æ¸²æŸ“èœå“åˆ—è¡¨
        function renderDishList() {
            for (const categoryId in dishCategories) {
                const categoryElement = document.getElementById(categoryId);
                categoryElement.innerHTML = '';
                
                dishCategories[categoryId].forEach(dishName => {
                    const dishItem = document.createElement('div');
                    dishItem.className = 'dish-item';
                    dishItem.innerHTML = `
                        <span class="dish-name">${dishName}</span>
                        <div class="dish-actions">
                            <button class="action-btn view-dish" title="æŸ¥çœ‹è¯¦æƒ…">ğŸ‘ï¸</button>
                            <button class="action-btn add-dish" title="æ·»åŠ åˆ°èœå•">â•</button>
                        </div>
                    `;
                    categoryElement.appendChild(dishItem);
                });
            }
        }

        // æ¸²æŸ“æ—¥æœŸé€‰æ‹©æŒ‰é’®
        function renderDayButtons() {
            const dayButtonsContainer = document.getElementById('day-selector-buttons');
            const days = ['æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­', 'æ˜ŸæœŸæ—¥'];
            
            dayButtonsContainer.innerHTML = '';
            
            days.forEach(day => {
                const button = document.createElement('button');
                button.className = 'day-btn';
                button.textContent = day;
                button.dataset.day = day;
                dayButtonsContainer.appendChild(button);
            });
        }

        // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
        function bindEvents() {
            // èœå“æŸ¥çœ‹å’Œæ·»åŠ æŒ‰é’®
            document.querySelectorAll('.view-dish').forEach(btn => {
                btn.addEventListener('click', function() {
                    const dishName = this.closest('.dish-item').querySelector('.dish-name').textContent;
                    showDishModal(dishName);
                });
            });
            
            document.querySelectorAll('.add-dish').forEach(btn => {
                btn.addEventListener('click', function() {
                    const dishName = this.closest('.dish-item').querySelector('.dish-name').textContent;
                    showDishModal(dishName);
                });
            });
            
            // æ—¥æœŸé€‰æ‹©æŒ‰é’®
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('day-btn')) {
                    document.querySelectorAll('.day-btn').forEach(btn => {
                        btn.classList.remove('selected');
                    });
                    e.target.classList.add('selected');
                    selectedDay = e.target.dataset.day;
                }
            });
            
            // æ·»åŠ åˆ°èœå•æŒ‰é’®
            document.getElementById('add-to-menu-btn').addEventListener('click', addDishToMenu);
            
            // å…³é—­å¼¹çª—æŒ‰é’®
            document.getElementById('close-modal').addEventListener('click', closeModal);
            
            // å¼¹çª—å¤–éƒ¨ç‚¹å‡»å…³é—­
            document.getElementById('dish-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });
            
            // åŠŸèƒ½æŒ‰é’®
            document.getElementById('generate-btn').addEventListener('click', generateRandomMenu);
            document.getElementById('reset-btn').addEventListener('click', resetMenu);
            document.getElementById('save-btn').addEventListener('click', saveMenu);
        }

        // æ˜¾ç¤ºèœå“è¯¦æƒ…å¼¹çª—
        function showDishModal(dishName) {
            selectedDish = dishName;
            
            document.getElementById('modal-dish-name').textContent = dishName;
            
            // å¡«å……é£Ÿæåˆ—è¡¨
            const ingredientsList = document.getElementById('modal-ingredients');
            ingredientsList.innerHTML = '';
            dishDetails[dishName].ingredients.forEach(ingredient => {
                const li = document.createElement('li');
                li.textContent = ingredient;
                ingredientsList.appendChild(li);
            });
            
            // å¡«å……æ­¥éª¤åˆ—è¡¨
            const stepsList = document.getElementById('modal-steps');
            stepsList.innerHTML = '';
            dishDetails[dishName].steps.forEach(step => {
                const li = document.createElement('li');
                li.textContent = step;
                stepsList.appendChild(li);
            });
            
            // æ˜¾ç¤ºå¼¹çª—
            document.getElementById('dish-modal').style.display = 'flex';
        }

        // å…³é—­å¼¹çª—
        function closeModal() {
            document.getElementById('dish-modal').style.display = 'none';
            selectedDay = null;
            document.querySelectorAll('.day-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
        }

        // æ·»åŠ èœå“åˆ°èœå•
        function addDishToMenu() {
            if (!selectedDish || !selectedDay) {
                alert('è¯·å…ˆé€‰æ‹©èœå“å’Œæ—¥æœŸï¼');
                return;
            }
            
            const dayKey = getDayKey(selectedDay);
            if (weekMenu[dayKey].includes(selectedDish)) {
                alert('è¯¥èœå“å·²å­˜åœ¨äºå½“å¤©çš„èœå•ä¸­ï¼');
                return;
            }
            
            weekMenu[dayKey].push(selectedDish);
            updateDayMenu(dayKey);
            closeModal();
        }

        // è·å–æ—¥æœŸå¯¹åº”çš„é”®å
        function getDayKey(dayName) {
            const dayMap = {
                'æ˜ŸæœŸä¸€': 'monday',
                'æ˜ŸæœŸäºŒ': 'tuesday',
                'æ˜ŸæœŸä¸‰': 'wednesday',
                'æ˜ŸæœŸå››': 'thursday',
                'æ˜ŸæœŸäº”': 'friday',
                'æ˜ŸæœŸå…­': 'saturday',
                'æ˜ŸæœŸæ—¥': 'sunday'
            };
            return dayMap[dayName];
        }

        // æ›´æ–°æŸä¸€å¤©çš„èœå•æ˜¾ç¤º
        function updateDayMenu(dayKey) {
            const dayElement = document.getElementById(`${dayKey}-dishes`);
            dayElement.innerHTML = '';
            
            weekMenu[dayKey].forEach(dish => {
                const dishElement = document.createElement('div');
                dishElement.className = 'selected-dish';
                dishElement.innerHTML = `
                    <span>${dish}</span>
                    <button class="remove-dish" data-day="${dayKey}" data-dish="${dish}">Ã—</button>
                `;
                dayElement.appendChild(dishElement);
            });
            
            // ç»‘å®šåˆ é™¤æŒ‰é’®äº‹ä»¶
            document.querySelectorAll('.remove-dish').forEach(btn => {
                btn.addEventListener('click', function() {
                    const dayKey = this.dataset.day;
                    const dishName = this.dataset.dish;
                    removeDishFromMenu(dayKey, dishName);
                });
            });
        }

        // ä»èœå•ä¸­ç§»é™¤èœå“
        function removeDishFromMenu(dayKey, dishName) {
            weekMenu[dayKey] = weekMenu[dayKey].filter(dish => dish !== dishName);
            updateDayMenu(dayKey);
        }

        // éšæœºç”Ÿæˆä¸€å‘¨èœå•
        function generateRandomMenu() {
            if (confirm('è¿™å°†æ›¿æ¢å½“å‰èœå•ï¼Œç¡®å®šè¦ç»§ç»­å—ï¼Ÿ')) {
                // æ¸…ç©ºå½“å‰èœå•
                for (const day in weekMenu) {
                    weekMenu[day] = [];
                }
                
                // ä¸ºæ¯ä¸€å¤©éšæœºé€‰æ‹©èœå“
                const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
                const categoryKeys = Object.keys(dishCategories);
                
                days.forEach(day => {
                    // æ¯å¤©é€‰æ‹©2-3ä¸ªèœå“ï¼ˆä»ä¸åŒç±»åˆ«ï¼‰
                    const numDishes = Math.floor(Math.random() * 2) + 2; // 2-3ä¸ªèœå“
                    const selectedCategories = [];
                    
                    for (let i = 0; i < numDishes; i++) {
                        let categoryKey;
                        do {
                            categoryKey = categoryKeys[Math.floor(Math.random() * categoryKeys.length)];
                        } while (selectedCategories.includes(categoryKey));
                        
                        selectedCategories.push(categoryKey);
                        
                        const dishesInCategory = dishCategories[categoryKey];
                        const randomDish = dishesInCategory[Math.floor(Math.random() * dishesInCategory.length)];
                        
                        if (!weekMenu[day].includes(randomDish)) {
                            weekMenu[day].push(randomDish);
                        }
                    }
                });
                
                // æ›´æ–°æ˜¾ç¤º
                for (const day in weekMenu) {
                    updateDayMenu(day);
                }
            }
        }

        // æ¸…ç©ºèœå•
        function resetMenu() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ•´ä¸ªèœå•å—ï¼Ÿ')) {
                for (const day in weekMenu) {
                    weekMenu[day] = [];
                    updateDayMenu(day);
                }
            }
        }

        // ä¿å­˜èœå•åˆ°æœ¬åœ°å­˜å‚¨
        function saveMenu() {
            localStorage.setItem('pomegranateBistroMenu', JSON.stringify(weekMenu));
            alert('èœå•å·²ä¿å­˜ï¼');
        }

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½èœå•
        function loadSavedMenu() {
            const savedMenu = localStorage.getItem('pomegranateBistroMenu');
            if (savedMenu) {
                Object.assign(weekMenu, JSON.parse(savedMenu));
                
                // æ›´æ–°æ˜¾ç¤º
                for (const day in weekMenu) {
                    updateDayMenu(day);
                }
            }
        }
        // ==================== è·¨è®¾å¤‡åŒæ­¥åŠŸèƒ½ ====================

// åŒæ­¥ç®¡ç†å™¨
let syncManager;

class SyncManager {
    constructor() {
        this.deviceId = this.generateDeviceId();
        this.isConnected = false;
        this.socket = null;
        this.reconnectAttempts = 0;
        this.maxReconnectAttempts = 5;
        
        // æ˜¾ç¤ºè®¾å¤‡ID
        document.getElementById('deviceIdDisplay').textContent = this.deviceId.substring(0, 8) + '...';
    }
    
    // ç”Ÿæˆè®¾å¤‡ID
    generateDeviceId() {
        let deviceId = localStorage.getItem('pomegranateDeviceId');
        if (!deviceId) {
            deviceId = 'device-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
            localStorage.setItem('pomegranateDeviceId', deviceId);
        }
        return deviceId;
    }
    
    // è¿æ¥åˆ°WebSocketæœåŠ¡å™¨
    connect() {
        try {
            // è¿™é‡Œå…ˆç”¨ä¸€ä¸ªå ä½URLï¼Œéƒ¨ç½²åˆ°Vercelåå†ä¿®æ”¹ä¸ºçœŸå®åŸŸå
            const serverUrl = 'https://shiliu220612.vercel.app';
            
            console.log('è¿æ¥åˆ°æœåŠ¡å™¨:', serverUrl);
            
            this.socket = io(serverUrl, {
                transports: ['websocket', 'polling']
            });
            
            this.socket.on('connect', () => {
                console.log('WebSocketè¿æ¥æˆåŠŸ');
                this.isConnected = true;
                this.updateStatus(true);
                this.reconnectAttempts = 0;
                
                // å‘é€è®¾å¤‡æ³¨å†Œä¿¡æ¯
                this.socket.emit('register', {
                    deviceId: this.deviceId,
                    timestamp: Date.now()
                });
                
                // è¯·æ±‚åŒæ­¥æœ€æ–°èœå•
                this.socket.emit('sync_request', {
                    deviceId: this.deviceId,
                    timestamp: Date.now()
                });
            });
            
            this.socket.on('menu_update', (data) => {
                this.handleMenuUpdate(data);
            });
            
            this.socket.on('sync_request', (data) => {
                this.handleSyncRequest(data);
            });
            
            this.socket.on('device_connected', (data) => {
                this.handleDeviceConnected(data);
            });
            
            this.socket.on('device_disconnected', (data) => {
                this.handleDeviceDisconnected(data);
            });
            
            this.socket.on('disconnect', () => {
                console.log('WebSocketè¿æ¥æ–­å¼€');
                this.isConnected = false;
                this.updateStatus(false);
                this.attemptReconnect();
            });
            
            this.socket.on('connect_error', (error) => {
                console.error('è¿æ¥é”™è¯¯:', error);
                this.isConnected = false;
                this.updateStatus(false);
            });
            
        } catch (error) {
            console.error('è¿æ¥å¤±è´¥:', error);
            this.updateStatus(false);
            this.attemptReconnect();
        }
    }
    
    // å¤„ç†èœå•æ›´æ–°
    handleMenuUpdate(data) {
        if (data.deviceId !== this.deviceId) {
            console.log('æ”¶åˆ°è¿œç¨‹èœå•æ›´æ–°:', data);
            
            // åˆå¹¶è¿œç¨‹èœå•æ•°æ®
            Object.assign(weekMenu, data.menu);
            
            // æ›´æ–°UI
            for (const day in weekMenu) {
                updateDayMenu(day);
            }
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('pomegranateBistroMenu', JSON.stringify(weekMenu));
            
            // æ˜¾ç¤ºåŒæ­¥é€šçŸ¥
            this.showSyncNotification('èœå•å·²ä»å…¶ä»–è®¾å¤‡åŒæ­¥æ›´æ–°');
        }
    }
    
    // å¤„ç†åŒæ­¥è¯·æ±‚
    handleSyncRequest(data) {
        if (data.requestingDevice !== this.deviceId) {
            this.sendMenuUpdate();
        }
    }
    
    // å¤„ç†è®¾å¤‡è¿æ¥
    handleDeviceConnected(data) {
        console.log('æ–°è®¾å¤‡è¿æ¥:', data.deviceId);
        this.showSyncNotification(`è®¾å¤‡ ${data.deviceId.substring(0, 8)}... å·²è¿æ¥`);
    }
    
    // å¤„ç†è®¾å¤‡æ–­å¼€
    handleDeviceDisconnected(data) {
        console.log('è®¾å¤‡æ–­å¼€:', data.deviceId);
        this.showSyncNotification(`è®¾å¤‡ ${data.deviceId?.substring(0, 8)}... å·²æ–­å¼€`);
    }
    
    // å‘é€èœå•æ›´æ–°
    sendMenuUpdate() {
        if (this.isConnected && this.socket) {
            this.socket.emit('menu_update', {
                deviceId: this.deviceId,
                menu: weekMenu,
                timestamp: Date.now()
            });
        }
    }
    
    // å°è¯•é‡æ–°è¿æ¥
    attemptReconnect() {
        if (this.reconnectAttempts < this.maxReconnectAttempts) {
            this.reconnectAttempts++;
            const delay = Math.min(1000 * Math.pow(2, this.reconnectAttempts), 30000);
            
            console.log(`å°è¯•é‡æ–°è¿æ¥... (${this.reconnectAttempts}/${this.maxReconnectAttempts})`);
            setTimeout(() => this.connect(), delay);
        }
    }
    
    // æ›´æ–°è¿æ¥çŠ¶æ€æ˜¾ç¤º
    updateStatus(connected) {
        const indicator = document.getElementById('syncIndicator');
        const statusText = document.getElementById('syncStatusText');
        
        if (connected) {
            indicator.classList.add('connected');
            statusText.textContent = 'å·²åŒæ­¥';
        } else {
            indicator.classList.remove('connected');
            statusText.textContent = 'æœªè¿æ¥';
        }
    }
    
    // æ˜¾ç¤ºåŒæ­¥é€šçŸ¥
    showSyncNotification(message) {
        const notification = document.createElement('div');
        notification.style.cssText = `
            position: fixed;
            top: 80px;
            right: 20px;
            background: #4bb543;
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 1001;
            max-width: 300px;
            word-wrap: break-word;
            animation: slideIn 0.3s ease;
        `;
        notification.textContent = message;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            if (notification.parentNode) {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }
        }, 3000);
    }
}

// ä¿®æ”¹ä¿å­˜èœå•å‡½æ•°ï¼Œæ·»åŠ åŒæ­¥åŠŸèƒ½
const originalSaveMenu = saveMenu;
saveMenu = function() {
    localStorage.setItem('pomegranateBistroMenu', JSON.stringify(weekMenu));
    
    // åŒæ­¥åˆ°å…¶ä»–è®¾å¤‡
    if (syncManager && syncManager.isConnected) {
        syncManager.sendMenuUpdate();
    }
    
    alert('èœå•å·²ä¿å­˜å¹¶åŒæ­¥ï¼');
};

// ä¿®æ”¹æ·»åŠ èœå“åˆ°èœå•å‡½æ•°ï¼Œæ·»åŠ åŒæ­¥åŠŸèƒ½
const originalAddDishToMenu = addDishToMenu;
addDishToMenu = function() {
    if (!selectedDish || !selectedDay) {
        alert('è¯·å…ˆé€‰æ‹©èœå“å’Œæ—¥æœŸï¼');
        return;
    }
    
    const dayKey = getDayKey(selectedDay);
    if (weekMenu[dayKey].includes(selectedDish)) {
        alert('è¯¥èœå“å·²å­˜åœ¨äºå½“å¤©çš„èœå•ä¸­ï¼');
        return;
    }
    
    weekMenu[dayKey].push(selectedDish);
    updateDayMenu(dayKey);
    
    // è‡ªåŠ¨ä¿å­˜å¹¶åŒæ­¥
    saveMenu();
    
    closeModal();
};

// ä¿®æ”¹ä»èœå•ä¸­ç§»é™¤èœå“å‡½æ•°ï¼Œæ·»åŠ åŒæ­¥åŠŸèƒ½
const originalRemoveDishFromMenu = removeDishFromMenu;
removeDishFromMenu = function(dayKey, dishName) {
    weekMenu[dayKey] = weekMenu[dayKey].filter(dish => dish !== dishName);
    updateDayMenu(dayKey);
    
    // è‡ªåŠ¨ä¿å­˜å¹¶åŒæ­¥
    saveMenu();
};

// ä¿®æ”¹éšæœºç”Ÿæˆèœå•å‡½æ•°ï¼Œæ·»åŠ åŒæ­¥åŠŸèƒ½
const originalGenerateRandomMenu = generateRandomMenu;
generateRandomMenu = function() {
    if (confirm('è¿™å°†æ›¿æ¢å½“å‰èœå•ï¼Œç¡®å®šè¦ç»§ç»­å—ï¼Ÿ')) {
        // æ¸…ç©ºå½“å‰èœå•
        for (const day in weekMenu) {
            weekMenu[day] = [];
        }
        
        // ä¸ºæ¯ä¸€å¤©éšæœºé€‰æ‹©èœå“
        const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
        const categoryKeys = Object.keys(dishCategories);
        
        days.forEach(day => {
            // æ¯å¤©é€‰æ‹©2-3ä¸ªèœå“ï¼ˆä»ä¸åŒç±»åˆ«ï¼‰
            const numDishes = Math.floor(Math.random() * 2) + 2;
            const selectedCategories = [];
            
            for (let i = 0; i < numDishes; i++) {
                let categoryKey;
                do {
                    categoryKey = categoryKeys[Math.floor(Math.random() * categoryKeys.length)];
                } while (selectedCategories.includes(categoryKey));
                
                selectedCategories.push(categoryKey);
                
                const dishesInCategory = dishCategories[categoryKey];
                const randomDish = dishesInCategory[Math.floor(Math.random() * dishesInCategory.length)];
                
                if (!weekMenu[day].includes(randomDish)) {
                    weekMenu[day].push(randomDish);
                }
            }
        });
        
        // æ›´æ–°æ˜¾ç¤º
        for (const day in weekMenu) {
            updateDayMenu(day);
        }
        
        // è‡ªåŠ¨ä¿å­˜å¹¶åŒæ­¥
        saveMenu();
    }
};

// ä¿®æ”¹æ¸…ç©ºèœå•å‡½æ•°ï¼Œæ·»åŠ åŒæ­¥åŠŸèƒ½
const originalResetMenu = resetMenu;
resetMenu = function() {
    if (confirm('ç¡®å®šè¦æ¸…ç©ºæ•´ä¸ªèœå•å—ï¼Ÿ')) {
        for (const day in weekMenu) {
            weekMenu[day] = [];
            updateDayMenu(day);
        }
        
        // è‡ªåŠ¨ä¿å­˜å¹¶åŒæ­¥
        saveMenu();
    }
};

// ä¿®æ”¹åˆå§‹åŒ–å‡½æ•°ï¼Œæ·»åŠ åŒæ­¥ç®¡ç†å™¨åˆå§‹åŒ–
const originalInit = init;
init = function() {
    // åŸæœ‰åˆå§‹åŒ–
    originalInit();
    
    // åˆå§‹åŒ–åŒæ­¥ç®¡ç†å™¨
    syncManager = new SyncManager();
    syncManager.connect();
};
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>

